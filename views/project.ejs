<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CodeKast</title>
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/sweetalert.css">
</head>
<body>
  <div id="codekast-wrapper">
    <header>
      <div id="ck-logo"><img src="/images/ck-logo.png" width="60"><p>CodeKast.io</p></div>
      <div id="user-log"></div>
    </header>

    <div class="container ck-roomwrapper" style="padding:0; position:relative;">
      <div id="header-wrap">
          <div class="project-header"></div>
      </div>

      <div class="ck-project-banner">
          <h1>Hello World</h1>
          <p>This is the description of the project. Insert the project description here.</p>
            <a href="#" class="btn btn-primary" target="_blank">Join Room</a>
      </div>

      <div class="ck-project-banner">
        <ul id="projects-list">
          <li class="container project">

            <div class="col-md-1 project-icon">

            <svg id="tick-icon" data-name="tick" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 170.08 170.08"><defs><style>.cls-1,.cls-2{fill:none;}.cls-1{clip-rule:evenodd;}.cls-3{clip-path:url(#clip-path);}.cls-4{clip-path:url(#clip-path-2);}.cls-5{fill:#5e5c5c;}.cls-6{clip-path:url(#clip-path-3);}</style><clipPath id="clip-path"><path class="cls-1" d="M85,145a60,60,0,1,1,60-60A60,60,0,0,1,85,145ZM85,14.17A70.87,70.87,0,1,0,155.91,85,70.95,70.95,0,0,0,85,14.17Z"/></clipPath><clipPath id="clip-path-2"><rect class="cls-2" x="-2030.82" y="-3427.9" width="14578.18" height="10366.7"/></clipPath><clipPath id="clip-path-3"><path class="cls-1" d="M113.19,56.3,72.47,97,54.08,78.64a5.58,5.58,0,1,0-7.9,7.9l22.34,22.34a5.58,5.58,0,0,0,7.9,0L121.09,64.2a5.59,5.59,0,0,0-7.9-7.9Z"/></clipPath></defs><title>tick</title><g class="cls-3"><g class="cls-4"><rect class="cls-5" x="-36.45" y="-36.45" width="242.97" height="242.97"/></g></g><g class="cls-6"><g class="cls-4"><rect class="cls-5" x="-6.07" y="4.05" width="179.42" height="157.08"/></g></g></svg>

            </div>
            <div class="col-md-2 project-timeline">

              <h3>week 1</h3>
              <h5>5 August 2016</h5>

            </div>

            <div class="col-md-8 project-name">

                <h3>Introduction HTML elements tags.</h3>
                <h5>Every avid independent filmmaker has dreamed about making that special interest documentary, or short film to show off their creative prowess. </h5>

            </div>


          </li>
          <li>
            <span>
              b
            </span>
          </li>
          <li>
            <span>
              c
            </span>
          </li>

        </ul>
      </div>



      <!-- todo: whole div clickable leads to edit classroom page, button to classroom page -->
      <!-- <div class="ck-room col-md-4">
        <div class="newroom-wrap">
          <h1 class="room-title">HTML 5 workshop</h1>
          <p class="room-des">class 1, introduction of html and css</p>
          <p class="room-creator">by <span class="creator-name">Dr Lau</span></p>
          <a href="#" class="btn btn-primary" target="_blank">Join Room</a>
        </div>
      </div> -->
    </div>

    <div class="profile-act">

    </div>

  </div><!-- Wrapper end -->



  <!--<script src="/socket.io/socket.io.js"></script>-->
  <script src="/js/jquery-1.11.3.min.js"></script>
  <scirpt src="/js/bootstrap.min.js"></scirpt>
  <script src="/js/sweetalert.min.js"></script>
  <script>
  var data;
    // jquery
    $(document).ready(function() {


      $('#logout').click(function() {
        window.location = '/logout';
      });

    });



    function addRoom() {
      console.log('addRoom() clicked.');
      $('.ck-newroom').fadeOut(200, function() {
        $('.ck-projecttitle').fadeIn(200);
      });
    }

    function cancelRoom() {
      $('.ck-projecttitle').fadeOut(200, function() {
        $('.ck-newroom').fadeIn(200);
      });
      $('#project_name,#project_desc').val('');
    }

    function createRoom() {
      var proj_name = $('#project_name').val();
      var proj_desc = $('#project_desc').val();
      if (proj_name === '' || proj_desc === '') {
        swal({
          title: "Error!",
          text: "Project name and description cannot be blank!",
          type: "error",
          confirmButtonText: "Got it!"
        });
        return;
      }

      //$('.ck-room').last().clone().appendTo('.ck-roomwraper');
      $('.ck-projecttitle').fadeOut(200, function() {
        $('.ck-newroom').fadeIn(200);
      });
      $('#project_name,#project_desc').val('');

      console.log('Creating new room...:');

      // old school method...todo: change to angular, for now it's ok
      data = { name: proj_name, desc: proj_desc };
      $.post('/classrooms', data, function(res) {
        console.log(res);
        $('.ck-roomwrapper').append('<div class="ck-room col-md-3"><div class="newroom-wrap"><h1 class="room-title">' + res.name +'</h1><p class="room-des">'+ res.desc +'</p><p class="room-creator">by <span class="creator-name">' + username + '</span></p><a href="/classrooms/' + res._id + '" class="btn btn-primary" target="_blank">Join Room</a></div></div>');
      }).fail(function(res) {
        var jsonResponse = JSON.parse(res.responseText);
        swal({
          title: "Error!",
          text: jsonResponse.error,
          type: "error",
          confirmButtonText: "Ok!"
        }, function() {
          setTimeout(function(){
            window.location = '/login';
          }, 1000);
        });
      });
    }

    $.get('/classrooms', function(data)
    {
      $.each(data, function(item)
      {

        // $('#classes').append('<option>'+item+"</option>");
        $('.ck-roomwarper').append('<div class="ck-room col-md-3"><div class="newroom-warp"><h1 class="room-title">'+roomname +'</h1><p class="room-des">'+ description +'</p><p class="room-creator">by Dr Lau</p><button type="button" class="btn btn-primary btn-joinroom" data-roomid='+item+'>Join Room</button></div></div>');
        $('#projectname,#description').val('');

        $('.btn-joinroom').on('click', function()
        {
          var thisRoom = $(this).attr('data-roomid');
          window.location = '/classroom/' + thisRoom;
        });
      })
    })
  </script>

</body>
</html>
